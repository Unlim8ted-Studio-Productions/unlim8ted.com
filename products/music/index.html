<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Unlim8ted - Music</title>
  <link rel="icon" href="https://unlim8ted.com/favicon.ico" type="image/x-icon" />
  <meta name="description"
    content="Unlim8ted Music. Great music made by Unlim8ted Studio Productions. Always free, no signup required. Powered by Unlim8ted Studio Productions." />

  <!-- Modern navbar web component -->
  <script type="module" src="/components/site-navbar.js"></script>

  <!-- MIDI parser -->
  <script src="https://cdn.jsdelivr.net/npm/@tonejs/midi"></script>

  <link rel="stylesheet" href="./resources/css/music.01.css">

</head>

<body>
  <site-navbar base="" cart-href="/cart" signin-href="https://unlim8ted.com/sign-in"
    profile-href="https://unlim8ted.com/profile"></site-navbar>

  <div class="shell" id="shell">
    <!-- Left panel -->
    <section class="panel">
      <div class="panel-header">
        <div>
          <h2 class="title">Music</h2>
          <p class="subtitle">Pick a track to play. PDFs open in a new tab.</p>
        </div>
        <div class="now-playing" id="nowPlaying">Nothing playing</div>
      </div>

      <div class="song-list" id="songList">
        <!-- Built from /tools/data/products.json -->
        <div class="empty">Loading tracks…</div>
      </div>

      <div class="footer">
        <p id="footer-text">&copy; 2019-2025 Unlim8ted Studio Productions. All rights reserved.</p>
      </div>
    </section>

    <!-- Right panel -->
    <section class="panel visualizer-wrap">
      <div class="panel-header">
        <div>
          <h2 class="title">Visualizer</h2>
          <p class="subtitle" id="vizSubtitle">MIDI notes falling in real-time.</p>
        </div>
        <div class="small">
          <span class="chip" id="statusChip">Idle</span>
          <span class="chip" id="timeChip">0:00</span>
        </div>
      </div>

      <canvas id="midiCanvas"></canvas>

      <!-- Epilepsy warning (dismissible) -->
      <div class="warning" id="epWarn" style="display:none;">
        <div>
          <strong>Photosensitivity warning</strong>
          <p>This visualizer contains flashing / rapidly changing visuals that may trigger seizures for people with
            photosensitive epilepsy. Use caution, reduce brightness, or disable playback if sensitive.</p>
        </div>
        <button class="btn ghost" id="dismissWarn" type="button">Dismiss</button>
      </div>

      <div class="controls">
        <div class="controls-row">
          <button class="btn" id="pauseBtn" type="button">Pause</button>
          <button class="btn" id="playBtn" type="button">Play</button>
          <button class="btn" id="restartBtn" type="button">Restart</button>
        </div>

        <input class="range" type="range" id="timeline" min="0" max="100" value="0" step="1" aria-label="Timeline" />

        <div class="controls-row">
          <div class="small">Volume</div>
          <input class="range" type="range" id="volume" min="0" max="1" step="0.01" value="1"
            aria-label="Volume" />
        </div>

        <div class="controls-row">
          <div class="small">Autoplay next</div>
          <label class="small" style="gap:10px;">
            <input type="checkbox" id="autoplayNext" checked />
            On
          </label>
        </div>
      </div>

      <!-- Reviews / Ratings -->
      <div class="reviews">
        <div class="reviewsHead">
          <div class="avgWrap">
            <div class="avgNum" id="avgNum">—</div>
            <div class="avgMeta">
              <div class="stars" id="avgStarsBig">☆☆☆☆☆</div>
              <div class="muted" id="avgLabel">Select a track</div>
              <div class="muted" id="countLabel">0 reviews</div>
            </div>
          </div>
          <div class="stars" id="avgStars">☆☆☆☆☆</div>
        </div>

        <div class="bars" id="bars"></div>

        <div class="commentList" id="commentList">
          <div class="empty">Select a track to view reviews.</div>
        </div>

        <div class="empty" id="mustSignIn" style="display:none;">
          Sign in to post a rating and review.
        </div>

        <form class="commentForm" id="commentForm">
          <div class="fieldRow">
            <input class="input" id="displayName" maxlength="80" placeholder="Display name (optional)" />
            <select class="select" id="ratingSel" aria-label="Rating">
              <option value="5">★★★★★ (5)</option>
              <option value="4">★★★★☆ (4)</option>
              <option value="3">★★★☆☆ (3)</option>
              <option value="2">★★☆☆☆ (2)</option>
              <option value="1">★☆☆☆☆ (1)</option>
            </select>
          </div>

          <textarea class="textarea" id="commentText" maxlength="2000"
            placeholder="Write a review (max 2000 chars)…"></textarea>

          <div class="controls-row">
            <div class="formMsg" id="formMsg"></div>
            <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;">
              <button class="btn ghost" type="button" id="deleteMyReviewBtn" style="display:none;">Delete my
                review</button>
              <button class="btn" type="submit" id="postBtn">Post</button>
            </div>
          </div>
        </form>
      </div>
    </section>
  </div>

  <script type="module" src="./resources/js/music.01.js"></script>
</body>

</html>
